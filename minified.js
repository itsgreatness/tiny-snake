!function(){if("boolean"!=typeof window.active){var e,n=function(){window.clearTimeout(e),window.active?(e=window.setTimeout((function(){E=!1,requestAnimationFrame(k)}),3e3),window.popup.style.display="inline-block",window.popup.focus()):(E=!0,window.active=!1,window.popup.style.display="none",window.focusedElement.focus({focusVisible:!0}))};let D;window.focusedElement=document.activeElement,window.active=!window.active??!0;let S=[0,0];window.popup=document.createElement("div"),window.popup.id="game";let T=!1;window.popup.style.all="initial",window.popup.style.display="inline-block",window.popup.style.position="fixed",window.popup.style.left="0px",window.popup.style.top="0px",window.popup.style.margin="0px 0px 0px 0px",window.popup.style.padding="0px 0px 0px 0px",window.popup.style.zIndex=9999,window.popup.tabIndex=0,window.popup.addEventListener("mousedown",(function(e){T=!0,S=[window.popup.offsetLeft-e.clientX,window.popup.offsetTop-e.clientY]}),!0),document.addEventListener("mouseup",(function(){T=!1}),!0),document.addEventListener("mousemove",(function(e){e.preventDefault(),T&&(D={x:e.clientX,y:e.clientY},window.popup.style.left=D.x+S[0]+"px",window.popup.style.top=D.y+S[1]+"px")}),!0),document.addEventListener("focus",(function(e){document.activeElement!=window.popup&&(window.focusedElement=document.activeElement)}),!0),document.addEventListener("keydown",(function(e){e.ctrlKey&&2==e.location&&(window.active=!window.active),n()}),!0),document.body.appendChild(window.popup),window.popup.focus({focusVisible:!0});var t=this&&this.__spreadArray||function(e,n,t){if(t||2===arguments.length)for(var o,i=0,p=n.length;i<p;i++)!o&&i in n||(o||(o=Array.prototype.slice.call(n,0,i)),o[i]=n[i]);return e.concat(o||Array.prototype.slice.call(n))},o=(Math.pow,Math.abs),i=Math.floor,p=Math.ceil,r=Math.max,w=(Math.min,function(e,n){return i(Math.random()*(i(n)-p(e))+p(e))}),a=function(e){return 1-o(e-2)},u=function(e){return Symbol.for(JSON.stringify(e))},c=24,l=24,d=16,s=new Array(l).fill(new Array(c).fill(0)),f=[{x:i(6),y:i(12)}],y=1,m=4,x={x:w(0,c),y:w(0,l)},h=0,v=!1,E=!0,g=document.createElement("canvas");g.width=384,g.height=384,window.popup.style.width=`${g.width}px`,window.popup.style.height=`${g.height}px`;var b=document.getElementById("game");null==b||b.appendChild(g);var A=g.getContext("2d");window.addEventListener("keydown",(function(e){var n=function(){switch(e.key.toLowerCase()){case"arrowdown":return e.preventDefault(),E?y:2;case"s":return E?y:2;case"arrowup":return e.preventDefault(),E?y:0;case"w":return E?y:0;case"arrowleft":return e.preventDefault(),E?y:3;case"a":return E?y:3;case"arrowright":return e.preventDefault(),E?y:1;case"d":return E?y:1;case"enter":return M(),y}}();(y+3)%4!=n&&(y+5)%4!=n||(y=n)}));var L=function(){s.fill(new Array(c).fill(0)),s[r(0,x.y)]=t(t(t([],s[r(0,x.y)].slice(0,r(0,x.x)),!0),[2],!1),s[r(0,x.y)].slice(r(0,x.x)+1,s[r(0,x.y)].length),!0),f.forEach((function(e){try{s[r(0,e.y)]=t(t(t([],s[r(0,e.y)].slice(0,r(0,e.x)),!0),[1],!1),s[r(0,e.y)].slice(r(0,e.x)+1,s[r(0,e.y)].length),!0)}catch(e){v=!0}})),s.forEach((function(e,n){e.forEach((function(e,t){A&&(A.fillStyle=["green","blue","red"][e],A.fillRect(t*d,n*d,d,d))}))})),A&&(A.fillStyle="white",A.font="bold ".concat(12,"px sans-serif"),A.fillText(h.toString(),16,32))},M=function(){v&&(f=[{x:i(6),y:i(12)}],y=1,m=4,x={x:w(0,c),y:w(0,l)},h=0,v=!1,E=!1,n())},k=function(){var e,n,t;E||(v||(f.unshift({x:f[0].x+(t=y,1-o(t-1)),y:f[0].y+a(y)}),(f=f.slice(0,m))[0].x==x.x&&f[0].y==x.y&&(h+=1,m+=1,x={x:w(0,c),y:w(0,l)}),(f[0].x>=c||f[0].x<0||f[0].y>=l||f[0].y<0)&&(v=!0),n={},(e=f).forEach((function(e,t){n.hasOwnProperty(u(e))||(n[u(e)]=t)})),e.some((function(e,t){return n[u(e)]!=t}))&&(v=!0)),L(),window.setTimeout(requestAnimationFrame,62.5,k))};requestAnimationFrame(L),n()}else window.active=!window.active,n()}();