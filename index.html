<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tiny-snake</title>
    <script defer src="./sources/main.js"></script>
</head>
<body>
    <h1>tiny-snake</h1>
    <p>snake game that lives in a bookmark! have clicked the bookmark at least once and press RCTRL to hide/show + pause/play</p>
    <h1>how to install</h1>
    <p><a href='javascript:!function () { if ("boolean" != typeof window.active) { function e() { window.clearTimeout(c), window.active ? (c = window.setTimeout((function () { h = !1, requestAnimationFrame(A) }), 3e3), window.popup.style.display = "inline-block", window.popup.focus()) : (h = !0, window.active = !1, window.popup.style.display = "none", window.focusedElement.focus({ focusVisible: !0 })) } let L; window.focusedElement = document.activeElement, window.active = !window.active ?? !0; let T = [0, 0]; window.popup = document.createElement("div"), window.popup.id = "game"; let k = !1; window.popup.style.display = "inline-block", window.popup.style.position = "absolute", window.popup.style.left = "0px", window.popup.style.top = "0px", window.popup.style.margin = "0px 0px 0px 0px", window.popup.style.padding = "0px 0px 0px 0px", window.popup.style.zIndex = 9999, window.popup.tabIndex = 0, window.popup.style.all = "initial", window.popup.addEventListener("mousedown", (function (e) { k = !0, T = [window.popup.offsetLeft - e.clientX, window.popup.offsetTop - e.clientY] }), !0), document.addEventListener("mouseup", (function () { k = !1 }), !0), document.addEventListener("mousemove", (function (e) { e.preventDefault(), k && (L = { x: e.clientX, y: e.clientY }, window.popup.style.left = L.x + T[0] + "px", window.popup.style.top = L.y + T[1] + "px") }), !0), document.addEventListener("focus", (function (e) { document.activeElement != window.popup && (window.focusedElement = document.activeElement) }), !0), document.addEventListener("keydown", (function (n) { n.ctrlKey && 2 == n.location && (window.active = !window.active), e() }), !0), document.body.appendChild(window.popup), window.popup.focus({ focusVisible: !0 }); var n = this && this.__spreadArray || function (e, n, t) { if (t || 2 === arguments.length) for (var o, i = 0, p = n.length; i < p; i++)!o && i in n || (o || (o = Array.prototype.slice.call(n, 0, i)), o[i] = n[i]); return e.concat(o || Array.prototype.slice.call(n)) }, t = (Math.pow, Math.abs), o = Math.floor, i = Math.ceil, p = function (e, n) { return o(Math.random() * (o(n) - i(e)) + i(e)) }, w = function (e) { return 1 - t(e - 2) }, c = function (e) { return Symbol.for(JSON.stringify(e)) }, l = 24, d = 24, a = 16, r = new Array(d).fill(new Array(l).fill(0)), u = [{ x: o(6), y: o(12) }], s = 1, f = 4, y = { x: p(0, l), y: p(0, d) }, m = 0, x = !1, h = !1, v = document.createElement("canvas"); v.width = 384, v.height = 384, window.popup.style.width = `${v.width}px`, window.popup.style.height = `${v.height}px`; var g = document.getElementById("game"); null == g || g.appendChild(v); var E = v.getContext("2d"); window.addEventListener("keydown", (function (e) { if (!h) { var n = function () { switch (e.key.toLowerCase()) { case "arrowdown": case "s": return 2; case "arrowup": case "w": return 0; case "arrowleft": case "a": return 3; case "arrowright": case "d": return 1; case "enter": S() } }(); (s + 3) % 4 != n && (s + 5) % 4 != n || (s = n) } })); var b = function () { r.fill(new Array(l).fill(0)), r[y.y] = n(n(n([], r[y.y].slice(0, y.x), !0), [2], !1), r[y.y].slice(y.x + 1, r[y.y].length), !0), u.forEach((function (e) { try { r[e.y] = n(n(n([], r[e.y].slice(0, e.x), !0), [1], !1), r[e.y].slice(e.x + 1, r[e.y].length), !0) } catch (e) { x = !0 } })), r.forEach((function (e, n) { e.forEach((function (e, t) { E && (E.fillStyle = ["green", "blue", "red"][e], E.fillRect(t * a, n * a, a, a)) })) })), E && (E.fillStyle = "white", E.font = "bold ".concat(12, "px sans-serif"), E.fillText(m.toString(), 16, 32)) }, S = function () { x && (u = [{ x: o(6), y: o(12) }], s = 1, f = 4, y = { x: p(0, l), y: p(0, d) }, m = 0, x = !1) }, A = function () { if (!h) { if (!1 === x) u.unshift({ x: u[0].x + (o = s, 1 - t(o - 1)), y: u[0].y + w(s) }), (u = u.slice(0, f))[0].x == y.x && u[0].y == y.y && (m += 1, f += 1, y = { x: p(0, l), y: p(0, d) }), (u[0].x > l || u[0].x < 0 || u[0].y > d || u[0].y < 0) && (x = !0), n = {}, (e = u).forEach((function (e, t) { n.hasOwnProperty(Symbol.for(JSON.stringify(e))) || (n[Symbol.for(JSON.stringify(e))] = t) })), e.some((function (e, t) { return n[Symbol.for(JSON.stringify(e))] != t })) && (x = !0); b(), window.setTimeout(requestAnimationFrame, 62.5, A) } var e, n, o }; requestAnimationFrame(b), window.setTimeout(requestAnimationFrame, 3e3, A) } else window.active = !window.active, e() }();'>
        drag this bookmarklet to your bookmarks bar</a> (might have some trouble on safari don't use it on safari).</p>
</body>
</html>